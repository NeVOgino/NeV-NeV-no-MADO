# NEVの窓 ブラウザ版 - デプロイガイド

## 📋 職員共有用のブラウザの作成方法

職員全員が共有フォルダからアクセスできるようにするには、以下の手順で設定します。

### 方法1: 社内共有フォルダにデプロイ（推奨）

1. **すべてのファイルを共有フォルダにコピー**
   ```
   以下のファイルを社内の共有フォルダ（例: \\cev-file5\share\NEVの窓ブラウザ版\）にコピー：
   
   - index.html
   - admin.html
   - style.css
   - admin.css
   - script.js
   - admin.js
   - data.json
   - README.md
   - USER_GUIDE.md
   - QUICK_START.md
   ```

2. **職員にアクセス方法を通知**
   ```
   職員全員に以下のパスを共有：
   
   \\cev-file5\share\NEVの窓ブラウザ版\index.html
   
   このファイルをダブルクリックするだけでブラウザで開けます。
   ```

3. **ショートカットを作成（オプション）**
   ```
   - index.htmlを右クリック → 「ショートカットの作成」
   - 作成したショートカットを各職員のデスクトップに配布
   - アイコン名を「NEVの窓」に変更
   ```

### 方法2: 社内Webサーバーにデプロイ

社内にWebサーバーがある場合：

1. **ファイルをWebサーバーのドキュメントルートにコピー**
   ```
   例: C:\inetpub\wwwroot\nev-window\
   ```

2. **職員にURLを通知**
   ```
   例: http://intranet.cev-pc.or.jp/nev-window/
   ```

### 方法3: 各職員のPCにコピー

共有フォルダにアクセスできない環境の場合：

1. **ZIPファイルを作成**
   ```
   すべてのファイルをZIPに圧縮
   ```

2. **各職員に配布**
   ```
   - 職員のPCの適切な場所（例: C:\NEVの窓\）に解凍
   - index.htmlのショートカットをデスクトップに作成
   ```

## 🔄 データの更新方法

### 管理者向け

1. **admin.htmlを開く**
   ```
   共有フォルダまたはWebサーバーのadmin.htmlを開く
   ```

2. **編集**
   ```
   - 各セクションの「編集」ボタンをクリック
   - JSON形式でデータを編集
   - 「保存」をクリック
   ```

3. **ダウンロードして置き換え**
   ```
   - 「data.jsonをダウンロード」ボタンをクリック
   - ダウンロードしたファイルを共有フォルダのdata.jsonと置き換え
   ```

4. **職員に更新を通知**
   ```
   職員にブラウザを更新（F5キー）するよう通知
   ```

## ⚠️ トラブルシューティング

### 「データ読み込みに失敗しました」エラーが出る場合

このエラーは、ブラウザがdata.jsonファイルを読み込めない場合に発生します。

#### 原因と解決方法

**1. ファイルパスの問題**
- **原因**: ファイルをローカルPCから直接開いている場合、ブラウザのセキュリティ制限によりJSONファイルを読み込めません
- **解決方法**: 
  - 共有フォルダにすべてのファイルを配置する
  - または、Webサーバーにデプロイする
  - または、ローカルで簡易Webサーバーを起動する

**2. data.jsonが見つからない**
- **原因**: data.jsonファイルが同じフォルダにない
- **解決方法**: 
  - index.html、admin.html、data.jsonが同じフォルダにあることを確認
  - すべてのファイルを一緒にコピーする

**3. ファイルが破損している**
- **原因**: data.jsonファイルが正しくない形式
- **解決方法**: 
  - バックアップからdata.jsonを復元
  - JSONの形式を確認（オンラインJSONバリデーターを使用）

**4. ブラウザのキャッシュの問題**
- **原因**: 古いデータがキャッシュされている
- **解決方法**: 
  - Ctrl + F5 でページをハードリフレッシュ
  - ブラウザのキャッシュをクリア

#### エラー確認方法

ブラウザのコンソールでエラーの詳細を確認できます：

1. **F12キー**を押す
2. **Console（コンソール）** タブを開く
3. エラーメッセージを確認
4. エラーメッセージをコピーして管理者に報告

### ローカルで簡易Webサーバーを起動する方法

data.jsonを正しく読み込むには、簡易Webサーバーの使用を推奨します。

#### Pythonを使う方法（推奨）

1. **Pythonがインストールされているか確認**
   ```cmd
   python --version
   ```

2. **ファイルのあるフォルダで実行**
   ```cmd
   cd C:\NEVの窓\
   python -m http.server 8080
   ```

3. **ブラウザで開く**
   ```
   http://localhost:8080/index.html
   ```

#### Node.jsを使う方法

1. **http-serverをインストール**
   ```cmd
   npm install -g http-server
   ```

2. **ファイルのあるフォルダで実行**
   ```cmd
   cd C:\NEVの窓\
   http-server -p 8080
   ```

3. **ブラウザで開く**
   ```
   http://localhost:8080/index.html
   ```

## 📞 サポート

### よくある質問

**Q: 編集モードから閲覧モードに戻るとエラーが出ます**
A: これは通常、ファイルパスの問題です。上記の「トラブルシューティング」を参照してください。

**Q: リンクをクリックしてもファイルが開きません**
A: 
- ファイル共有パス（`\\cev-file5\...`）の場合、PCがそのサーバーにアクセスできる必要があります
- ネットワーク接続を確認してください
- ファイルへのアクセス権限があることを確認してください

**Q: 更新したデータが反映されません**
A: 
1. data.jsonファイルが正しく置き換えられているか確認
2. ブラウザでF5キーを押して更新
3. Ctrl + F5でハードリフレッシュ

**Q: 職員は閲覧のみ、管理者のみ編集できるようにしたいです**
A: 
- admin.htmlへのアクセスを管理者のみに制限
- 共有フォルダのdata.jsonファイルの書き込み権限を管理者のみに設定

## 🎓 使い方の詳細

詳しい使い方については、以下のドキュメントを参照してください：

- **USER_GUIDE.md** - 詳細な利用ガイド（非技術者向け）
- **QUICK_START.md** - クイックスタートガイド
- **README.md** - プロジェクト概要と技術仕様

---

**最終更新日**: 2025年11月5日
